/** * Returns the name of the currently set context. * * @author name <jimmy.buyco@estansaas.com> * @date 07-Nov-2014 * @param * @return * @changes * @edited by arjay.dacanay@estansaas.com *//** * This method show the data tables for user list module. * * @param. * * @return void */$(document).ready(function (){    $("select[name='salutation'] option:eq(0)").attr("disabled", "disabled");    $("select[name='user_role'] option:eq(0)").attr("disabled", "disabled");    $("select[name='user_countryId'] option:eq(0)").attr("disabled", "disabled");    $('#user_username').on('keypress', function(e) {        if (e.which == 32)            return false;    });    $(".title").css('display', 'none');    $(".fname").css('display', 'none');    $(".lname").css('display', 'none');    $(".username").css('display', 'none');    $(".role").css('display', 'none');    $(".email").css('display', 'none');    $(".newpassword").css('display', 'none');    $(".passwordconfirm").css('display', 'none');    $("#errorNotif").css('display', 'none');    $("#emailError").css('display', 'none');    if(!$('.tabb').hasClass('act')){        $('#SearchMyBills').keyup(function(){            $('#tblActiveUsers').dataTable().fnFilter($(this).val());        });        filter_member('#tblActiveUsers','users-list');    }    function filter_member(tablename, link){        $('.filter_c').on('click', function(e){            $('#filterActive').html($(this).text());            var id = $(this).data('id');            var BASE_URL = $('#hdnBaseUrl').val();            $(tablename).dataTable().fnDestroy();            $(tablename).dataTable({                "aaSorting": [[ 5, "desc" ]],                "bAutoWidth": false,                "sDom": '<"top"f>rt<"bottom"ip><"clear">',                "bServerSide": true,                "sAjaxSource": BASE_URL + "/admin/users/ajax?type="+link+"&status="+id,                "lengthMenu": [                    [ 10, 50, -1],                    [ 15, 50, "All"]                ],                "order": [0, 'desc'],                "fnRowCallback": function (row, data, index)                {                    if (data[6] == 'Active') {                        $(row).addClass('highlight');                    } else {                        $(row).addClass('gray');                    }                },                "language": {                    //Hide Previous and Next in DataTable                    "paginate": {                        "previous": "<div class = 'prevBtn'></div>",                        "next": "<div class = 'nextBtn'></div>"                    }                },                "aoColumnDefs": [                    { "aTargets": [ 0 ], "bSortable": true },                    { "aTargets": [ 1 ], "bSortable": true },                    { "aTargets": [ 2 ], "bSortable": true },                    { "aTargets": [ 3 ], "bSortable": true },                    { "aTargets": [ 4 ], "bSortable": true },                    { "aTargets": [ 5 ], "bSortable": false },                    { "aTargets": [ 6 ], "bSortable": false },                    { "aTargets": [ 7 ], "bSortable": false },                    { "aTargets": [ 8 ], "bSortable": false }                ],                /**                 * Fills datatable with empty rows                 *                 * Set default Table size when Table is empty                 */                "fnDrawCallback": function (oSettings)                {                    var total_count = oSettings.fnRecordsTotal();                    var columns_in_row = $(this).children('thead').children('tr').children('th').length;                    var show_num = oSettings._iDisplayLength;                    var tr_count = $(this).children('tbody').children('tr').length;                    var missing = show_num - tr_count;                    //Set default Table size when Table is empty                    if (show_num < total_count && missing > 0) {                        for (var i = 0; i < missing; i++) {                            $(this).append('<tr class="space"><td colspan="' + columns_in_row + '">&nbsp;</td></tr>');                        }                    } else if (show_num > total_count) {                        for (var i = 0; i < (show_num - tr_count); i++) {                            $(this).append('<tr class="space"><td colspan="' + columns_in_row + '">&nbsp;</td></tr>');                        }                    } else if (total_count == 0) {                        for (var i = 0; i < (14 - tr_count); i++) {                            $(this).append('<tr class="space"><td colspan="' + columns_in_row + '">&nbsp;</td></tr>');                        }                    }                }            });        });    }    $('[name="salutation"], [name="fname"], [name="lname"], [name="user_username"], [name="user_role"] ,[name="user_email"],[name="user_countryId"],[name="user_countryIdd"], [name="newInput"], [name="password_confirmation"]').on('keyup', function(){        $(this).parent().next('.column-right').html("");    })        .on('change', function(){            $(this).parent().next('.column-right').html("");        });    $('#countryone').on('change',function(){        $('#countrytwo').val(this.value);    });    $('#btnSubmitUser').click(function(e){        e.preventDefault();        var salutation = $('.salutation').val();        var role = $('.user_role').val();        var newPassword = $("#newPassword").val();        var confirmNewPassword = $("#confirmNewPassword").val();//        if ( newPassword.length < 8 && newPassword != ""){//            $("#errorNotif").show().text("Password must be more than 7 characters long");//        }//        else if (newPassword == "") {//            $("#errorNotif").show().text("Password cannot be empty");//        }//        else if (newPassword == confirmNewPassword) {//            $("#errorNotif").show().text("");//        } else if (newPassword != confirmNewPassword && newPassword.length > 8  ) {//            $("#errorNotif").show().text("Password mismatch");//        } else {//            $("#errorNotif").show().text("");//        }//        $(function() {        $('#FormAddUser').validate({            framework: 'bootstrap',            excluded: [':disabled'],            focusInvalid: false,            debug: true,            rules: {                salutation: {                    required: true,                    depends: function(element){                        $(".title").css('display', 'block');                    }                },                fname:{                    required: true,                    depends: function(element){                        $(".fname").css('display', 'block');                    }                },                lname:{                    required: true,                    depends: function(element){                        $(".lname").css('display', 'block');                    }                },                user_username:{                    required: true,                    minlength: 6,                    depends: function(element){                        $(".username").css('display', 'block');                    }                },                user_role:{                    required: true,                    depends: function(element){                        $(".role").css('display', 'block');                    }                },                user_countryId:{                    required: true,                    depends: function(element){                        $(".role").css('display', 'block');                    }                },                user_email:{                    required: true,                    depends: function(element){                        $(".email").css('display', 'block');                    }                },                newInput:{                    required: true,                    minlength:8,                    depends: function(element){                        $(".newpassword").css('display', 'block');                    }                }//                password_confirmation:{//                    required: true,//                    minlength:8,//                    depends: function(element){//                        $(".passwordconfirm").css('display', 'block');//                    }//                }            },            messages:{                salutation:'*',                fname:'*',                lname: '*',                user_username: '✘',                user_countryId: '*',                user_role: '*',                user_email: '✘',                newInput: '*'            },            errorPlacement: function(error, element) {            },            invalidHandler: function() {                return false;            },            submitHandler: function(form) {                $().iseziloading('show');                form.submit();                return true;            }        });        if($('#countrytwo').val()){            $('#countrytwo').closest('div').next('.column-right').html('');        }        $('#countryone').on('change', function(){            $(this).closest('div').next('.column-right').html('');        });        if($(".email").text()=="✘"){            $(".email").css('display', 'block');            return false;        }        if($(".username").text()=="✘"){            $(".username").css('display', 'block');            return false        }        if($('#FormAddUser').valid()) {            $(".username").css('display', 'block');            $(".email").css('display', 'block');            if(salutation =='default'){                $(".title").show();            }else if(role =='0'){                $(".role").show();            }//            else if(newPassword == "" || confirmNewPassword == ""){//                $("#errorNotif").show().text("Password cannot be empty");//            }//            else if(newPassword.length < 7 && newPassword != ""){//                $("#errorNotif").show().text("Password must be more than 7 characters long");//            }//            else if (newPassword == confirmNewPassword) {            else{                 e.preventDefault();                 $.confirm({                     text: "<div style='font-size: 13px; font-weight: bold;'>Are you sure you want to proceed?</div>",                     confirm: function (button) {                         $().iseziloading('show');                         $.ajax({                             url: 'users/ajax?type=addnewmember',                             type: 'post',                             data: $('#FormAddUser').serialize(),                             dataType: 'json',                             success: function (data){                                 $().iseziloading('hide');                                 $("#addNewMemberModal").modal('hide');                                 $("#MemberAddedModal").modal('show');                                 $("#FormAddUser")[0].reset();                                 $(".title").hide();                                 $(".fname").hide();                                 $(".lname").hide();                                 $(".username").hide();                                 $(".role").hide();                                 $(".email").hide();                                 $(".newpassword").hide();                                 $(".passwordconfirm").hide();                                 setTimeout(function(){                                     $("#MemberAddedModal").modal('hide');                                 }, 1200);                             }                         });                     },                     cancel: function (button) {                         return false;                     }                 });            }        }//        });    });    $("#user_email").on('keyup change',function (event)    {        //Get user email id        var e = this.value;        $.ajax({            //Check user email if available            url: "users/ajax?type=validateuseremail&user_email="+e,            success: function (data)            {                //Check user email if unique and available                if (data.result=="unique") {                    $(".email").css("color","green").show().text("✓");                }else{                    $(".email").css("color","red").show().text("✘");                }            }        });    });    $("#user_username").on('keyup change', function (event)    {        //Get user email id        var e = this.value;        $.ajax({            //Check username if available            url: "users/ajax?type=validateusername&user_username="+e,            success: function (data)            {                //Check user email if unique and available                if (data.result=="unique") {                    $(".username").css("color","green").show().text("✓");                }else{                    $(".username").css("color","red").show().text("✘");                }            }        });    });    var BASE_URL = $('#hdnBaseUrl').val();    //Show Table Row Heading    $('#tblActiveUsers').dataTable({        "aaSorting": [[ 5, "desc" ]],        "bAutoWidth": false,        "sDom": '<"top"f>rt<"bottom"ip><"clear">',        "bServerSide": true,        "sAjaxSource": BASE_URL + "/admin/users/ajax?type=users-list",        "lengthMenu": [            [ 10, 50, -1],            [ 15, 50, "All"]        ],        "aoColumnDefs": [            { "aTargets": [ 0 ], "bSortable": true },            { "aTargets": [ 1 ], "bSortable": true },            { "aTargets": [ 2 ], "bSortable": true },            { "aTargets": [ 3 ], "bSortable": true },            { "aTargets": [ 4 ], "bSortable": true },            { "aTargets": [ 5 ], "bSortable": false },            { "aTargets": [ 6 ], "bSortable": false },            { "aTargets": [ 7 ], "bSortable": false },            { "aTargets": [ 8 ], "bSortable": false }        ],        "order": [0, 'desc'],        "fnRowCallback": function (row, data, index)        {            if (data[6] == 'Active') {                $(row).addClass('highlight');            } else {                $(row).addClass('gray');            }        },        "language": {            //Hide Previous and Next in DataTable            "paginate": {                "previous": "<div class = 'prevBtn'></div>",                "next": "<div class = 'nextBtn'></div>"            }        },        /**         * Fills datatable with empty rows         *         * Set default Table size when Table is empty         */        "fnDrawCallback": function (oSettings)        {            var total_count = oSettings.fnRecordsTotal();            var columns_in_row = $(this).children('thead').children('tr').children('th').length;            var show_num = oSettings._iDisplayLength;            var tr_count = $(this).children('tbody').children('tr').length;            var missing = show_num - tr_count;            //Set default Table size when Table is empty            if (show_num < total_count && missing > 0) {                for (var i = 0; i < missing; i++) {                    $(this).append('<tr class="space"><td colspan="' + columns_in_row + '">&nbsp;</td></tr>');                }            } else if (show_num > total_count) {                for (var i = 0; i < (show_num - tr_count); i++) {                    $(this).append('<tr class="space"><td colspan="' + columns_in_row + '">&nbsp;</td></tr>');                }            } else if (total_count == 0) {                for (var i = 0; i < (14 - tr_count); i++) {                    $(this).append('<tr class="space"><td colspan="' + columns_in_row + '">&nbsp;</td></tr>');                }            }//            $(".li1 .iviewer_download").on('click', function(e){//                var source = $('.li1 img').attr('src');//                downloadReceipt2(source);//            });//            $(".li1 .iviewer_print").on('click', function(e){//                var source = $('.li1 img').attr('src');//                adminPrintReceipt2(source);//            });////            $(".li2 .iviewer_download").on('click', function(e){//                var source = $('.li2 img').attr('src');//                downloadReceipt2(source);//            });//            $(".li2 .iviewer_print").on('click', function(e){//                var source = $('.li2 img').attr('src');//                adminPrintReceipt2(source);//            });////            $(".li3 .iviewer_download").on('click', function(e){//                var source = $('.li3 img').attr('src');//                downloadReceipt2(source);//            });//            $(".li3 .iviewer_print").on('click', function(e){//                var source = $('.li3 img').attr('src');//                adminPrintReceipt2(source);//            });        }    });    //Activate User    $('#tblActiveUsers').on('click', '.btn-Activate-member', function (e)    {        var id = $(this).data('id');        //Confirmation Box        $.confirm({            text: "<div style='font-size: 18px;'>Please confirm Activation</div>",            confirm: function (button)            {                $.ajax({                    url: BASE_URL + "/admin/users/ajax?type=user-Activate&id=" + id,                    beforeSend: function ()                    {                        $().iseziloading('show');                    },                    success: function (data)                    {                        $().iseziloading('hide');                        global.updateDataTable('tblActiveUsers');//                            $.ajax({//                                type: 'post',//                                url: BASE_URL + '/sendEmail',//                                data: {//                                    emailData: data.Emaildata//                                }//                                ,//                                beforeSend: function ()//                                {//                                window.location = location.pathname;//                                },//                                success: function (data)//                                {////                                }//                            });                    }                });            },            cancel: function (button)            {            }        });    });    $('#addNewMemberModal').on('click','.btn-fb-cancel', function (){        document.getElementById("FormAddUser").reset();        $('.column-right').css('display', 'none')    })    //Deactivate User    $('#tblActiveUsers').on('click', '.btn-deactivate-member', function (e)    {        var id = $(this).data('id');        //Confirmation Box        $.confirm({            text: "<div style='font-size: 18px;'>Please confirm deactivation</div>",            confirm: function (button)            {//                deactivateUser(id);                var holdthis = this;                $.ajax({                    url: BASE_URL + "/admin/users/ajax?type=user-deactivate&id=" + id,                    beforeSend: function ()                    {                        $().iseziloading('show');                    },                    success: function (data)                    {//                        $().forceuserlogout(id);                        $().iseziloading('hide');                        global.updateDataTable('tblActiveUsers');                    try{                        var msg = {                            category: 'Account deactivated',                            countNotif: 1,                            message: 'Your account has been deactivated by the Administrator',                            user_id: id,                            info: ''                        };                        websocket.send(JSON.stringify(msg));                    } catch (Ex) { }                        /*window.location = BASE_URL+"/admin/users";*///                        $.ajax({//                            type: 'post',//                            url: BASE_URL + '/bpo/sendEmail',//                            data: {//                                emailData: data.Emaildata//                            },//                            beforeSend: function ()//                            {//                            },//                            success: function (data)//                            {////                            }//                        });                    }                });            },            cancel: function (button)            {            }        });    });    //Review User    $('#tblActiveUsers').on('click', '.btn-review', function (e) {        var id = $(this).data('id');        $.confirm({            text: "<div style='font-size: 13px; font-weight: bold; margin: 0 30%;'>Please confirm to Review</div>",            confirm: function (button)            {                $.ajax({                    url: BASE_URL + "/admin/users/ajax?type=user-review&id=" + id,                    beforeSend: function ()                    {                        $().iseziloading('show');                    },                    complete: function ()                    {                    },                    success: function (msg)                    {                        $().iseziloading('hide');                        global.updateDataTable('tblActiveUsers');                        global.updateDataTable('tblForReview');                        global.updateDataTable('tblReject')                        document.getElementById("userCnt").innerHTML = msg.newValue;                    }                });            },            cancel: function (button)            {            }        });    });    //Table Reject Review    $('#tblReject').on('click', '.btn-review', function (e)    {        var id = $(this).data('id');        $.confirm({            text: "<div style='font-size: 13px; font-weight: bold; margin: 0 30%;'>Please confirm to Review</div>",            confirm: function (button)            {                $.ajax({                    url: BASE_URL + "/admin/users/ajax?type=user-review2&id=" + id,                    beforeSend: function ()                    {                        $().iseziloading('show');                    },                    complete: function ()                    {                    },                    success: function (msg)                    {                        $().iseziloading('hide');                        global.updateDataTable('tblActiveUsers');                        global.updateDataTable('tblForReview');                        global.updateDataTable('tblReject')                        document.getElementById("userCnt").innerHTML = msg.newValue;                    }                });            },            cancel: function (button)            {            }        });    });    //Reject User in Table Review    $('#tblForReview').on('click', '.btn-Reject', function (e)    {        var id = $(this).data('id');        $.confirm({            text: "<div style='font-size: 13px; font-weight: bold; margin: 0 30%'>Please confirm to Reject</div>",            confirm: function (button)            {                $.ajax({                    url: BASE_URL + "/admin/users/ajax?type=user-reject&id=" + id,                    beforeSend: function ()                    {                        $().iseziloading('show');                    },                    success: function (msg)                    {                        $().iseziloading('hide');                        global.updateDataTable('tblActiveUsers');                        global.updateDataTable('tblForReview');                        global.updateDataTable('tblReject')                        document.getElementById("userCnt").innerHTML = msg.newValue;                    }                });            },            cancel: function (button)            {            }        });    });    //Approve User in Table Review    $('#tblForReview').on('click', '.btn-Approve', function (e)    {        var id = $(this).data('id');        $.confirm({            text: "<div style='font-size: 13px; font-weight: bold; margin: 0 30%;'>Please confirm to Approve</div>",            confirm: function (button)            {                $.ajax({                    url: BASE_URL + "/admin/users/ajax?type=user-approve&id=" + id,                    beforeSend: function ()                    {                        $().iseziloading('show');                    },                    success: function (msg)                    {                        //$("body").isLoading( "hide" );                        $().iseziloading('hide');                        global.updateDataTable('tblActiveUsers');                        global.updateDataTable('tblForReview');                        global.updateDataTable('tblReject')                        document.getElementById("userCnt").innerHTML = msg.newValue;                    }                });            },            cancel: function (button)            {            }        });    });    //Sophisticated User    $('.main-container').on('click', '.btn-view', function (e)    {        e.preventDefault();        var id = $(this).data('id');        $.ajax({            //Get Sophisticated User            url: BASE_URL + "/admin/users/ajax?type=sophisticated-view&id=" + id,            beforeSend: function ()            {                $().iseziloading('show');            },            success: function (msg)            {                $().iseziloading('hide');                document.getElementById("td_Name").innerHTML = "<h1>" + msg.Name + "</h1>";                document.getElementById("td_Email").innerHTML = msg.Email;                document.getElementById("td_Mobile").innerHTML = msg.Mobile;                document.getElementById("td_Home").innerHTML = msg.Home;                document.getElementById("td_Office").innerHTML = msg.Office;                document.getElementById("td_Add1").innerHTML = msg.Add1;                document.getElementById("td_Add2").innerHTML = msg.Add2;                document.getElementById("td_City").innerHTML = msg.Ciety;                document.getElementById("td_Region").innerHTML = msg.Region;                document.getElementById("td_Postal").innerHTML = msg.Postal;                document.getElementById("td_Country").innerHTML = msg.Country;                document.getElementById("td_DoB").innerHTML = msg.Dob;                document.getElementById("td_Status").innerHTML = msg.Status;                //For Approval                if (msg.Status == 'for_approval') {                    document.getElementById("btn1").innerHTML = "<input type='button' id='btnModalApprove'   value='APPROVE' class='btn-xs form-control' width='50%'>";                    document.getElementById("btn2").innerHTML = "<input type='button' id='btnModalReject'  value='REJECT' class='btn-xs form-control' width='50%'>";                    document.getElementById("btn3").innerHTML = "<input type='button' id='btnModalClose' onclick='CloseModal()' value='CLOSE' class='btn-xs form-control' width='50%'>";                }            }        });        $(this).colorbox({inline: true, width: "500px", height: "500px"});    });    /* JS FOR KYC MODAL */    $('#tblForReview').on('click', '.btn-review', function (e)    {        $('#1btn-reject, #1btn-approve,#2btn-reject, #2btn-approve,#3btn-reject, #3btn-approve').removeAttr('style');        $('#secondKyc').css('margin-top','0px')        $('#thirdKyc').css('margin-top','0px')        $('.l2').css('margin-top','-245px')        $('.l3').css('margin-top','-245px')        var userId = $(this).data('userid')        var id = $(this).data('id');        var first = $(this).data('first');        var second = $(this).data('second');        var third = $(this).data('third');        var statusf = $(this).data('statusf');        var statuss = $(this).data('statuss');        var statust = $(this).data('statust');        if(third==''){            $('#myCarousel .itemli3').removeClass('item').addClass('hide');            $('.li3ol').css('display','none');        } else {            $('#myCarousel .itemli3').removeClass('hide').addClass('item');            $('.li3ol').css('display','block');            $('.kycBtnDiv').css('padding','0');        }        $("#kycContentModal").modal();        $('#kycContentModal').css('visibility','hidden');        $('#lou').val(id);        $('#1status').val(statusf);        $('#2status').val(statuss);        $('#3status').val(statust);//        if(statusf == '1'){//            $('#1btn-reject').css('display','none')//            $('#1btn-approve').text('Approved')////        }//        else if(statusf == '2'){//            $('#1btn-approve').css('display','none')//            $('#1btn-reject').text('Rejected')//        }//        else {////        }//        if(statuss == '1'){//            $('#2btn-reject').css('display','none')//            $('#2btn-approve').text('Approved')//        }//        else if(statuss == '2'){//            $('#2btn-approve').css('display','none')//            $('#2btn-reject').text('Rejected')//        }//        else {////        }//        if(statust == '1'){//            $('#3btn-reject').css('display','none')//            $('#3btn-approve').text('Approved')//        }//        else if(statust == '2'){//            $('#3btn-approve').css('display','none')//            $('#3btn-reject').text('Rejected')//        }//        else {////        }        if(first==''){            first="defaultImage/nologo.png";            $(".transZindex").css("display","block");            $('.li1.imgPlace img').addClass('fixLeftTop');        } else {            $(".transZindex").css("display","none");        }        if( second==''){            second="defaultImage/nologo.png";            $(".transZindex2").css("display","block");            $('.li2 .imgPlace img').addClass('fixLeftTop');        } else {            $(".transZindex2").css("display","none");        }        if( third==''){            third="defaultImage/nologo.png";            $(".transZindex3").css("display","block");            $('.li3 .imgPlace img').addClass('fixLeftTop');        } else {            $(".transZindex3").css("display","none");        }        $().iseziloading("show");        $('.carousel').carousel(0);        setTimeout(            function()            {                var iv_src = "../../public/users/"+userId+"/uploads/kyc/"+first;                var iv1 = $(".li1 .imgPlace").iviewer({                    src: "" + iv_src,                    onFinishLoad: function(ev, iv_src){                        $(".li1 .imgPlace").iviewer('center')                    },                    onErrorLoad: function(ev, iv_src){                        $(".li1 .imgPlace").iviewer('center')                    }                });                $(".li1 img").attr("src", iv_src);                $('.carousel').carousel(1);                setTimeout(                    function()                    {                        var iv_src2 = "../../public/users/"+userId+"/uploads/kyc/"+second;                        var iv2 = $(".li2 .imgPlace").iviewer({                            src: "" + iv_src2,                            onFinishLoad: function(ev, iv_src){                                $(".li2 .imgPlace").iviewer('center')                            },                            onErrorLoad: function(ev, iv_src){                                $(".li2 .imgPlace").iviewer('center')                            }                        });                        $(".li2 img").attr("src", iv_src2);                        setTimeout(                            function()                            {                                var iv_src3 = "../../public/users/"+userId+"/uploads/kyc/"+third;                                var iv2 = $(".li3 .imgPlace").iviewer({                                    src: "" + iv_src3,                                    onFinishLoad: function(ev, iv_src){                                        $(".li2 img").iviewer('center')                                        $().iseziloading("hide");                                        $('#kycContentModal').css('visibility','visible');                                    },                                    onErrorLoad: function(ev, iv_src){                                        $(".li2 img").iviewer('center')                                        $().iseziloading("hide");                                        $('#kycContentModal').css('visibility','visible');                                    }                                });                                $(".li3 img").attr("src", iv_src3);                                $('.li1').on('click', '.iviewer_download', function (e){                                    var l = $('.li1 .imgPlace img').attr('src');                                    var source = l.substr(3);                                    downloadReceipt2(source);                                });                                $('.li2').on('click', '.iviewer_download', function (e){                                    var l = $('.li2 .imgPlace img').attr('src');                                    var source = l.substr(3);                                    downloadReceipt2(source);                                });                                $('.li3').on('click', '.iviewer_download', function (e){                                    var l = $('.li3 .imgPlace img').attr('src');                                    var source = l.substr(3);                                    downloadReceipt2(source);                                });                                $('.li1').on('click', '.iviewer_print', function (e){                                    var l = $('.li1 .imgPlace img').attr('src');                                    var m = l.substr(12);                                    var source = BASE_URL + m;                                    adminPrintReceipt2(source);                                });                                $('.li2').on('click', '.iviewer_print', function (e){                                    var l = $('.li2 .imgPlace img').attr('src');                                    var m = l.substr(12);                                    var source = BASE_URL + m;                                    adminPrintReceipt2(source);                                });                                $('.li3').on('click', '.iviewer_print', function (e){                                    var l = $('.li3 .imgPlace img').attr('src');                                    var m = l.substr(12);                                    var source = BASE_URL + m;                                    adminPrintReceipt2(source);                                });                            }, 500);                        $('.carousel').carousel(0);                    }, 500);                $('.carousel').carousel(2);            }, 500);        //3        /*$("").on('click', function(e){            alert('?');        });*/                var source = $('.li1 .imgPlace img');        source            .on('error', function() {                $(".transZindex").css("display","block");                $(this)                    .removeAttr('src')                    .removeAttr('style')                    .attr('src', BASE_URL+"/img/no_attachment_found.png")                    .addClass('fixLeftTop')            })            .on('load',function(){                $(this).removeClass('fixLeftTop').css('top','0px');            })        ;        var source1 = $('.li2 .imgPlace img');        source1            .on('error', function() {                $(".transZindex").css("display","block");                $(this)                    .removeAttr('src')                    .removeAttr('style')                    .attr('src', BASE_URL+"/img/no_attachment_found.png")                    .addClass('fixLeftTop')            })            .on('load',function(){                $(this).removeClass('fixLeftTop').css('top','0px');            })        ;        var source2 = $('.li3 .imgPlace img');        source2            .on('error', function() {                $(".transZindex").css("display","block");                $(this)                    .removeAttr('src')                    .removeAttr('style')                    .attr('src', BASE_URL+"/img/no_attachment_found.png")                    .addClass('fixLeftTop')            })            .on('load',function(){                $(this).removeClass('fixLeftTop').css('top','0px');            })        ;    });    $('#tblReject').on('click', '.btn-view', function (e)    {        $('.carousel').carousel(0);        $('#1btn-reject, #1btn-approve,#2btn-reject, #2btn-approve,#3btn-reject, #3btn-approve').css('display','none')//        $('#secondKyc').css('margin-top','20px')//        $('#thirdKyc').css('margin-top','20px')        var userId = $(this).data('userid');        var id = $(this).data('id');        var first = $(this).data('first');        var second = $(this).data('second');        var third = $(this).data('third');        if(third==''){//            $('#myCarousel .itemli3').css('display','none');            $('#myCarousel .itemli3').removeClass('item').addClass('hide');            $('.li3ol').css('display','none');        } else {//            $('#myCarousel .itemli3').css('display','block');            $('#myCarousel .itemli3').removeClass('hide').addClass('item');            $('.li3ol').css('display','block');            $('.kycBtnDiv').css('padding','0');        }        $("#kycContentModal").modal();        $('#kycContentModal').css('visibility','hidden');//        $('#firstKyc').attr('src', '../../../public/uploads/kyc/'+first);//        $('#secondKyc').attr('src', '../../../public/uploads/kyc/'+second);//        $('#thirdKyc').attr('src', '../../../public/uploads/kyc/'+third);        if(first==''){            first="defaultImage/nologo.png";            $(".transZindex").css("display","block");            $('.li1.imgPlace img').addClass('fixLeftTop');        } else {            $(".transZindex").css("display","none");        }        if( second==''){            second="defaultImage/nologo.png";            $(".transZindex2").css("display","block");            $('.li2 .imgPlace img').addClass('fixLeftTop');        } else {            $(".transZindex2").css("display","none");        }        if( third==''){            third="defaultImage/nologo.png";            $(".transZindex3").css("display","block");            $('.li3 .imgPlace img').addClass('fixLeftTop');        } else {            $(".transZindex3").css("display","none");        }        $().iseziloading("show");        $('.carousel').carousel(0);        setTimeout(            function()            {                var iv_src ="../../public/users/"+userId+"/uploads/kyc/"+first;                var iv1 = $(".li1 .imgPlace").iviewer({                    src: "" + iv_src,                    onFinishLoad: function(ev, iv_src){                        $(".li1 .imgPlace").iviewer('center')                    },                    onErrorLoad: function(ev, iv_src){                        $(".li1 .imgPlace").iviewer('center')                    }                });                $(".li1 img").attr("src", iv_src);                $('.carousel').carousel(1);                setTimeout(                    function()                    {                        var iv_src2 = "../../public/users/"+userId+"/uploads/kyc/"+second;                        var iv2 = $(".li2 .imgPlace").iviewer({                            src: "" + iv_src2,                            onFinishLoad: function(ev, iv_src){                                $(".li2 .imgPlace").iviewer('center')                            },                            onErrorLoad: function(ev, iv_src){                                $(".li2 .imgPlace").iviewer('center')                            }                        });                        $(".li2 img").attr("src", iv_src2);                        setTimeout(                            function()                            {                                var iv_src3 = "../../public/users/"+userId+"/uploads/kyc/"+third;                                var iv2 = $(".li3 .imgPlace").iviewer({                                    src: "" + iv_src3,                                    onFinishLoad: function(ev, iv_src){                                        $(".li2 img").iviewer('center')                                        $().iseziloading("hide");                                        $('#kycContentModal').css('visibility','visible');                                    },                                    onErrorLoad: function(ev, iv_src){                                        $(".li2 img").iviewer('center')                                        $().iseziloading("hide");                                        $('#kycContentModal').css('visibility','visible');                                    }                                });                                $(".li3 img").attr("src", iv_src3);                                $(".li1 .iviewer_download").on('click', function(e){                                    var l = $('.li1 .imgPlace img').attr('src');                                    var source = l.substr(3);                                    downloadReceipt2(source);                                });                                $(".li1 .iviewer_print").on('click', function(e){                                    e.stopPropagation();                                    var l = $('.li1 .imgPlace img').attr('src');                                    var m = l.substr(12);                                    var source = BASE_URL + m;                                    adminPrintReceipt2(source);                                });                                $(".li2 .iviewer_download").on('click', function(e){                                    var l = $('.li2 .imgPlace img').attr('src');                                    var source = l.substr(3);                                    downloadReceipt2(source);                                });                                $(".li2 .iviewer_print").on('click', function(e){                                    e.stopPropagation();                                    var l = $('.li2 .imgPlace img').attr('src');                                    var m = l.substr(12);                                    var source = BASE_URL + m;                                    adminPrintReceipt2(source);                                });                                $(".li3 .iviewer_download").on('click', function(e){                                    var l = $('.li3 .imgPlace img').attr('src');                                    var source = l.substr(3);                                    downloadReceipt2(source);                                });                                $(".li3 .iviewer_print").on('click', function(e){                                    e.stopPropagation();                                    var l = $('.li3 .imgPlace img').attr('src');                                    var m = l.substr(12);                                    var source = BASE_URL + m;                                    adminPrintReceipt2(source);                                });                            }, 500);                        $('.carousel').carousel(0);                    }, 500);                $('.carousel').carousel(2);            }, 500);    });    $('.carousel').carousel({        interval: false    })    $("#btn-cancel-term2").click(function(){        $("#kycContentModaldiv").modal('hide');    });    $(document).ready(function () {        $(".btn-close-kycView").click(function(){            $("#kycContentModaldiv").modal('hide');        });    });    //Show Modal Bill View    $('#bill_view').on('click', '#btnModalReject', function (e)    {        var id = $(this).data('id');        $.fn.colorbox.close();        //Confirmation Box        $.confirm({            text: "<div style='font-size: 13px; font-weight: bold; margin: 0 30%;'>Please confirm toReject</div>",            confirm: function (button)            {                $.ajax({                    //Reject Sophisticated User                    url: BASE_URL + "/admin/users/ajax?type=user-reject&id=" + id,                    beforeSend: function ()                    {                        $().iseziloading('show');                    },                    success: function (msg)                    {                        $().iseziloading('hide');                        global.updateDataTable('tblActiveUsers');                        global.updateDataTable('tblForReview');                        global.updateDataTable('tblReject')                        document.getElementById("userCnt").innerHTML = msg.newValue;                    }                });            },            cancel: function (button)            {            }        });    });    // Zab    $('#myInputTextField').keyup(function ()    {        var activeTable = $(".active").find('table').attr('id');        var activeDataTable = $('#' + activeTable).dataTable();        activeDataTable.fnFilter($(this).val());    });    $('#btnAddMember').on('click', function(){        $('#addNewMemberModal').modal('show');        $('#errorNotif').css('display', 'none');        $('.email').removeAttr('style').attr('style', 'display: none;');        $("#FormAddUser")[0].reset();    });});function CloseModal(){    $.fn.colorbox.close();}$(document).ready(function (){    $('#1btn-approve').on('click', function(){        var id = $('#lou').val();        $.confirm({            text: "<div style='font-size: 13px; font-weight: bold; margin: 0 25% 0  25%;'>Are you sure you want to approve image?</div>",            confirm: function (button) {                $.ajax({                    url: 'getkycApproved',                    type: 'post',                    data: {                        reviewId: id                    },                    success: function (data) {                        $("#viewUploadModalApprovedKyc").modal("show");                        $('#1btn-reject').css('display','none');                        $('#1btn-approve').text('Approved')                    },                    cancel: function () {                    }                });            }        });    });    $('#2btn-approve').on('click', function(){        var id = $('#lou').val();        $.confirm({            text: "<div style='font-size: 13px; font-weight: bold; margin: 0 25% 0  25%;'>Are you sure you want to approve image?</div>",            confirm: function (button) {                $.ajax({                    url: 'getkyc1Approved',                    type: 'post',                    data: {                        reviewId: id                    },                    success: function (data) {                        $("#viewUploadModalApprovedKyc").modal("show");                        $('#2btn-reject').css('display','none')                        $('#2btn-approve').text('Approved')                    },                    cancel: function () {                    }                });            }        });    });    $('#3btn-approve').on('click', function(){        var id = $('#lou').val();        $.confirm({            text: "<div style='font-size: 13px; font-weight: bold; margin: 0 25% 0  25%;'>Are you sure you want to approve image?</div>",            confirm: function (button) {                $.ajax({                    url: 'getkyc2Approved',                    type: 'post',                    data: {                        reviewId: id                    },                    success: function (data) {                        $("#viewUploadModalApprovedKyc").modal("show");                        $('#3btn-reject').css('display','none')                        $('#3btn-approve').text('Approved')                    },                    cancel: function () {                    }                });            }        });    });    $('#1btn-reject').on('click', function(){        var id = $('#lou').val();        $.confirm({            text: "<div style='font-size: 13px; font-weight: bold; margin: 0 25% 0  25%;'>Are you sure you want to reject image?</div>",            confirm: function (button) {                $.ajax({                    url: 'getkycRejected',                    method: 'post',                    data: {                        reviewId: id                    },                    success: function (data) {                        $("#viewUploadModalRejectedKyc").modal("show");                        $('#1btn-approve').css('display','none')                        $('#1btn-reject').text('Rejected')                    },                    cancel: function () {                    }                });            }        });    });    $('#2btn-reject').on('click', function(){        var id = $('#lou').val();        $.confirm({            text: "<div style='font-size: 13px; font-weight: bold; margin: 0 25% 0  25%;'>Are you sure you want to reject image?</div>",            confirm: function (button) {                $.ajax({                    url: 'getkyc1Rejected',                    method: 'post',                    data: {                        reviewId: id                    },                    success: function (data) {                        $("#viewUploadModalRejectedKyc").modal("show");                        $('#2btn-approve').css('display','none')                        $('#2btn-reject').text('Rejected')                    },                    cancel: function () {                    }                });            }        });    });    $('#3btn-reject').on('click', function(){        var id = $('#lou').val();        $.confirm({            text: "<div style='font-size: 13px; font-weight: bold; margin: 0 25% 0  25%;'>Are you sure you want to reject image?</div>",            confirm: function (button) {                $.ajax({                    url: 'getkyc2Rejected',                    method: 'post',                    data: {                        reviewId: id                    },                    success: function (data) {                        $("#viewUploadModalRejectedKyc").modal("show");                        $('#3btn-approve').css('display','none')                        $('#3btn-reject').text('Rejected')                    },                    cancel: function () {                    }                });            }        });    });    $('#addNewMemberModal').on('keypress','.auto-cap', function() {        var str =$(this).val();        if (str && str.length >= 1)        {            var firstChar = str.charAt(0);            var remainingStr = str.slice(1);            str = firstChar.toUpperCase() + remainingStr;        }        $(this).val(str);    });});